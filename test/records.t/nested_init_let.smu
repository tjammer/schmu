(type foo {:x int})

(type ys {:y foo :z int})

(external printi (fun int unit))

(defn record_with_laters ()
  (def x {:x 12})
  {:y x :z 15})

(defn ctrl ()
  (def ret {:y {:x 17} :z 9})
  (def a {:y {:x 1} :z 2})
  ret)

(def ys (record_with_laters))
(printi (.z ys))
(printi (.x (.y ys)))
-- should print 17 and 9
(def ctrl (ctrl))
(printi (.x (.y ctrl)))
(printi (.z ctrl))
0
