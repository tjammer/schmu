(external printi (fun int unit))

(record (t 'a) {:first int :gen 'a :third bool})

(fun apply [(f (fun 'b 'a)) (x 'b)] (f x))

(fun pass [x]
  -- We have to use the record somehow, otherwise it's passed
  -- as a generic variable and then copied trivially
  {:first (.first x) :gen (.gen x) :third (.third x)})

(val int_t {:first 700 :gen 20 :third false})

(printi (.first (apply pass int_t)))
(printi (.first (apply pass {:first 234 :gen false :third true})))
