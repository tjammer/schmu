external printi : int -> unit

fun fib(n)
  if n < 2 then n
  else
    -- local function
    fun fibn2(n) fib(n - 2) end

    -- anonymous function
    -- shadow fib. Since the function is anonymous, the inner fib call still calls the outer fib
    fib = fun(n) fib(n - 1) end
    fibn2(n) + fib(n)
  end
end

printi(fib(30))
