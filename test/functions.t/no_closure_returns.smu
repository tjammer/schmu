-- We need a nonconst value to capture
type to_capture = { mutable field : int }

-- Wrap into function because globals are not captured
fun main_() =
  a = { field = 1 }

  fun() ->
    a = fun() -> a
    a
