(external printi (fun int unit))

(defn apply (x f) (f x))

(defn add1 (x) (+ x 1))

-- We also pass polymorphic functions
(defn pass (x) (copy x))

-- ...and a lambda
(def pass2 (fn (x) (copy x)))

(defn makefalse (b)
  (if b
    false
    b))

(defn int_of_bool (b)
  (if b 1 0))

-- TODO polymorphic recursion example

(-> (apply 0 add1)
    printi)
(-> (apply 1 (fn (x) (+ x 1)))
    printi)
(-> true
    (apply makefalse)
    int_of_bool
    printi)
(printi (apply 3 (fn (x) (copy x)))) -- Shoulde be inferred with concrete type
(printi (apply 4 pass))
(printi (apply 5 pass2))
