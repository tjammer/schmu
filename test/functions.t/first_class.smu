external printi : int -> unit

function apply(x, f)
  f(x)
end

function add1(x)
  x + 1
end

-- We also pass polymorphic functions
function pass(x)
  x
end

-- ...and a lambda
pass2 = fn (x) x end

function makefalse(b)
  if b then false
  else b end
end

function int_of_bool(b)
  if b then 1 else 0 end
end

-- TODO polymorphic recursion example

apply(0, add1) -> printi
apply(1, fn (x) x + 1) -> printi
true -> apply(makefalse) -> int_of_bool -> printi
printi(apply(3, fn (x) x)) -- Should be inferred with concrete type
printi(apply(4, pass))
-- printi(apply(5, pass2))
