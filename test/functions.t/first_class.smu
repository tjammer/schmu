external printi : int -> unit

fun apply(x, f) = f(x)

fun add1(x) = x + 1

-- We also pass polymorphic functions
fun pass(x) = x

-- ...and a lambda
pass2 = fn (x) x

fun makefalse(b) =
  if b then false
  else b

fun int_of_bool(b) =
  if b then 1 else 0

-- TODO polymorphic recursion example

apply(0, add1) -> printi
apply(1, fn (x) x + 1) -> printi
true -> apply(makefalse) -> int_of_bool -> printi
printi(apply(3, fn (x) x)) -- Should be inferred with concrete type
printi(apply(4, pass))
-- printi(apply(5, pass2))
