type capturable = { mutable a : int }
a = { a = 10 }

fun capture_a() a.a + 2 end

fun capture_a_wrapped()
  -- empty function. In order for this to work, the closure
  -- needs to be propagated in env
  fun wrap()
    fun inner() a.a + 2 end
    inner()
  end
  wrap()
end

capture_a() -> ignore
capture_a_wrapped()
