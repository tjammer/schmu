(external printi (fun int unit))

(record (t 'a) {:x 'a})

(fun apply [x f env]
  (f x env))

(fun apply2 [(x 'a) (f (fun 'a (fun 'a 'b) 'b)) (env (fun 'a 'b))]
  (f x env))

(fun add1 [(x int)]
  (+ x 1))

(fun boxed2int_int [t env]
  (val a (env (.x t)))
  {:x a})

(val a (.x (apply {:x 15} boxed2int_int add1)))
(printi a)
(val b (.x (apply2 {:x 15} boxed2int_int add1)))
(printi b)
